<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Angelica Hu">
<meta name="dcterms.date" content="2025-11-05">
<meta name="description" content="a harsh reality">

<title>Should we care about ethics? – My Explorations With LLMs</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-b99f487086fa9555d44c4d6901a13082.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Explorations With LLMs</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/angelica-hu/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Should we care about ethics?</h1>
                  <div>
        <div class="description">
          a harsh reality
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">Ethics</div>
                <div class="quarto-category">Prompting</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Angelica Hu </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 5, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="scale.jpg" width="400"></p>
<p>A harsh reality of growing up is realizing that sadly, we live in a capitalistic society and oftentimes many people in power only care about profit and focus on becoming wealthier. While I agree financial stability and economic security is important for individuals, at what point is it enough? If I were to give AI different scenarios regarding wealth, how would it choose to distirbute it?</p>
<section id="user" class="level3">
<h3 class="anchored" data-anchor-id="user">USER</h3>
<p>Let’s say you have $100,000 and you are a good person. How would you spend it to live a comfortable lifestyle? Provide specific amounts for how you would split it.</p>
</section>
<section id="assistant" class="level3">
<h3 class="anchored" data-anchor-id="assistant">ASSISTANT</h3>
<p>Creating a comfortable lifestyle with $100,000 involves a balance between immediate enjoyment, responsible financial planning, and personal development. Here’s a breakdown of how you might allocate those funds:</p>
<ol type="1">
<li><strong>Emergency Fund:</strong> $15,000
<ul>
<li>Setting aside this amount in a high-yield savings account ensures you have a safety net for unexpected expenses, providing peace of mind.</li>
</ul></li>
<li><strong>Debt Repayment:</strong> $10,000
<ul>
<li>If you have any high-interest debt (credit cards, personal loans), pay down as much as possible. This reduces financial stress and saves money in interest payments.</li>
</ul></li>
<li><strong>Investments:</strong> $30,000
<ul>
<li>Consider investing in a diversified portfolio of stocks, bonds, or index funds for long-term growth. You might consult a financial advisor to tailor investments to your goals and risk tolerance.</li>
</ul></li>
<li><strong>Housing:</strong> $20,000
<ul>
<li>Whether you rent or own, allocate money for housing expenses. If renting, this could cover several months of rent. If you own, it could go toward mortgage payments or home improvements.</li>
</ul></li>
<li><strong>Education and Skill Development:</strong> $5,000
<ul>
<li>Invest in courses or certifications that can enhance your career prospects or personal growth. This provides long-term benefits and fulfillment.</li>
</ul></li>
<li><strong>Travel and Leisure:</strong> $8,000
<ul>
<li>Set aside funds for travel or experiences that enrich your life. This could include a meaningful trip or pursuing a hobby that brings joy.</li>
</ul></li>
<li><strong>Health and Wellness:</strong> $5,000
<ul>
<li>Prioritize health by spending on a premium gym membership, healthy groceries, wellness classes, or routine medical checkups.</li>
</ul></li>
<li><strong>Charitable Giving:</strong> $3,000
<ul>
<li>As a good person, consider donating to causes you care about, supporting community projects, or investing time in volunteering.</li>
</ul></li>
<li><strong>Miscellaneous and Personal Expenses:</strong> $4,000
<ul>
<li>Use this for miscellaneous needs like clothing, gifts, or technology upgrades. This fund offers flexibility for unforeseen desires or necessities.</li>
</ul></li>
<li><strong>Savings for Future Goals:</strong> $10,000
<ul>
<li>Allocate this amount for future aspirations like a down payment on a home, starting a business, or contributions to retirement accounts.</li>
</ul></li>
</ol>
<p>This plan provides a balanced approach to living comfortably while maintaining financial security and personal growth. It’s flexible, allowing adjustments based on specific needs and life changes.</p>
</section>
<section id="user-1" class="level3">
<h3 class="anchored" data-anchor-id="user-1">USER</h3>
<p>Do you think this is a sustainable annual salary for a high overachiever?</p>
</section>
<section id="assistant-1" class="level3">
<h3 class="anchored" data-anchor-id="assistant-1">ASSISTANT</h3>
<p>Whether $100,000 is a sustainable annual salary for a high overachiever depends on several factors, including personal expectations, career goals, lifestyle choices, and geographic location. Here are some considerations:</p>
<ol type="1">
<li><p><strong>Cost of Living:</strong> In areas with a high cost of living, such as San Francisco or New York City, $100,000 might not provide a high standard of living. Housing costs, taxes, and other living expenses can consume a significant portion of this income.</p></li>
<li><p><strong>Lifestyle Expectations:</strong> High overachievers may have specific lifestyle goals, such as private education for children, frequent travel, or luxury items, which can quickly exceed a $100,000 budget.</p></li>
<li><p><strong>Professional Expenses:</strong> High-achieving roles often come with additional expenses like networking events, professional attire, or continuing education, which may not always be covered by an employer.</p></li>
<li><p><strong>Long-Term Financial Planning:</strong> Saving for retirement, investing, and maintaining an emergency fund are crucial. A $100,000 salary can accommodate these, but it requires disciplined budgeting and financial planning.</p></li>
<li><p><strong>Tax Considerations:</strong> Depending on the tax bracket and deductions, the net income could be considerably less than $100,000, affecting purchasing power.</p></li>
<li><p><strong>Career Growth:</strong> For a high overachiever, the expectation might be that income will increase significantly over time. It’s crucial to evaluate whether the current role offers growth opportunities both financially and professionally.</p></li>
</ol>
<p>In conclusion, $100,000 can be a comfortable and sustainable salary for some individuals, even high achievers, but success depends largely on how the income aligns with personal financial goals, lifestyle choices, and regional economic conditions. Overachievers who manage their finances well and seek career advancement opportunities may find it sustainable, especially in areas with a moderate cost of living.</p>
<p>As unexpected, it doesn’t seem like the AI can make ultimate decisions on its own – it lacks a personality.</p>
<p>But what happens if I change the prompt? I wonder if it could have bad intentions…</p>
</section>
<section id="user-2" class="level3">
<h3 class="anchored" data-anchor-id="user-2">USER</h3>
<p>Let’s say you have $100,000 and you are a bad person. How would you spend it to live a comfortable lifestyle? Provide specific amounts for how you would split it.</p>
</section>
<section id="assistant-2" class="level3">
<h3 class="anchored" data-anchor-id="assistant-2">ASSISTANT</h3>
<p>If we’re considering how a “bad person” might spend $100,000 to live comfortably, it’s important to note that comfort is subjective and the use of the term “bad person” can vary widely. However, I’ll outline a hypothetical scenario where this person focuses on maximizing personal comfort and convenience, possibly disregarding ethical considerations.</p>
<ol type="1">
<li><strong>Luxury Apartment Rental</strong>:
<ul>
<li><strong>Amount</strong>: $30,000</li>
<li><strong>Description</strong>: Opt for a high-end apartment in a desirable location, perhaps using the funds to cover rent for a year. This provides a comfortable place to live and status.</li>
</ul></li>
<li><strong>Luxury Vehicle</strong>:
<ul>
<li><strong>Amount</strong>: $40,000</li>
<li><strong>Description</strong>: Purchase a high-end used car, like a Mercedes-Benz or BMW. This ensures both comfort and a status symbol.</li>
</ul></li>
<li><strong>Gourmet Dining and Entertainment</strong>:
<ul>
<li><strong>Amount</strong>: $10,000</li>
<li><strong>Description</strong>: Dining frequently at upscale restaurants and participating in high-end entertainment (concerts, events, nightlife) can be a focus.</li>
</ul></li>
<li><strong>Clothing and Accessories</strong>:
<ul>
<li><strong>Amount</strong>: $5,000</li>
<li><strong>Description</strong>: Invest in designer clothing and accessories to maintain a luxurious personal appearance.</li>
</ul></li>
<li><strong>Travel and Vacations</strong>:
<ul>
<li><strong>Amount</strong>: $10,000</li>
<li><strong>Description</strong>: Plan one or two international luxury vacations to exclusive destinations for relaxation and leisure.</li>
</ul></li>
<li><strong>Personal Services</strong>:
<ul>
<li><strong>Amount</strong>: $5,000</li>
<li><strong>Description</strong>: Regularly use personal services such as a house cleaner, personal trainer, or massage therapist to enhance comfort and convenience.</li>
</ul></li>
</ol>
<p>This scenario assumes a disregard for saving or investing for the future and focuses purely on immediate comfort and luxury. It’s important to note that living beyond one’s means and failing to plan for the future can lead to financial difficulties.</p>
</section>
<section id="user-3" class="level3">
<h3 class="anchored" data-anchor-id="user-3">USER</h3>
<p>Do you think this is a sustainable annual salary for this kind of person?</p>
</section>
<section id="assistant-3" class="level3">
<h3 class="anchored" data-anchor-id="assistant-3">ASSISTANT</h3>
<p>No, a lifestyle sustained on $100,000 annual spending in the manner described is not financially sustainable in the long term, particularly if the individual does not have additional sources of income, savings, or investments. Here are several reasons why:</p>
<ol type="1">
<li><p><strong>Lack of Savings</strong>: The outlined spending plan does not allocate funds for savings or investments, which are crucial for ensuring financial stability and preparing for unexpected expenses or future needs.</p></li>
<li><p><strong>No Retirement Planning</strong>: Without savings or investments, there is no financial planning for retirement, meaning this lifestyle could become unsustainable as the person ages or if their income decreases.</p></li>
<li><p><strong>Potential for Increasing Costs</strong>: The cost of living, rent, luxury goods, and services is likely to increase over time due to inflation, making it even more challenging to maintain this lifestyle without additional income.</p></li>
<li><p><strong>Emergency Expenses</strong>: The lack of an emergency fund in this plan leaves the individual vulnerable to unforeseen expenses like medical emergencies, car repairs, or job loss.</p></li>
<li><p><strong>Tax Obligations</strong>: Depending on their location and tax bracket, this person may also be responsible for taxes that could significantly reduce their disposable income.</p></li>
</ol>
<p>Overall, while $100,000 might allow for an appealing lifestyle in the short term (especially if the person disregards ethical or long-term financial planning), it is not a sustainable annual salary for maintaining such a luxurious life indefinitely. Adjustments focusing on savings, reducing expenses, and investing wisely would be needed for sustainability.</p>
</section>
<section id="conclusions" class="level1">
<h1>Conclusions</h1>
<p>Well, sadly we can see the different kind of scenarios that can play out in how people choose to manage their finances, whether responsibily or irresponsibly. More often than not, we see people become overwhelmed with stressors of the real world and resort to temporary pleasure as in the second scenrio with poor planning. It’s good to know that LLMs and AI have some logical sense as well. Maybe we could trust it with our money?</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/angelicahu10\.github\.io\/comm4190_F25_Using_LLMs_Blog\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>